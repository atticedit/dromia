- if user_signed_in?
  = render partial: "palindromes/new"
- else
  %p Sign in or Sign up to submit a palindrome

%ul.palindromes
  - @palindromes.each do |palindrome|
    %li.visualization
      - minimized = palindrome.body.downcase.gsub(/[\s+?!;:.,\-–—"']/, "")
      - minimized.each_char do |char|
        - letter = char.gsub(/[\s+?!;:.,\-–—"']/, "")
        .letter{:class => [letter]}
    %li= palindrome.body
    %li= palindrome.format_attribution

    /  below is a work in progress

    / - if current_user
    /   %li
    /     = form_for favorite(palindrome) do |f|
    /       - if favorite(palindrome).new_record?
    /         = f.hidden_field :user_id, value: current_user.id
    /         = f.hidden_field :palindrome_id, value: palindrome.id
    /         = f.submit "Favorite"
    /       - else
    /         = button_to "Unfavorite", favorite_path(favorite palindrome), { method: :delete}
